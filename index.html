<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tabela Raoni — Projeção de posição</title>
  <meta name="description" content="Ferramenta simples para projetar posição provável em concursos a partir de dados do ranking e percentual de faltosos." />
  <link rel="stylesheet" href="assets/style.css?v=20260218" />

  <!--
    Estrutura atualizada para bater com a imagem:
    - Calculadora em evidência, centralizada
    - "Como usar" abaixo da calculadora
    - Cores e identidade visual preservadas
  -->
  <style>
:root {
  --bg: #0b1020;
  --bg-soft: #111933;
  --surface: rgba(20, 29, 56, 0.78);
  --surface-solid: #182449;
  --text: #e9ecf7;
  --text-muted: #b4bfdc;
  --primary: #4f7dff;
  --primary-soft: #7ea0ff;
  --success: #3dd598;
  --danger: #ff6b8a;
  --border: rgba(164, 180, 230, 0.26);
  --shadow: 0 24px 60px rgba(5, 10, 25, 0.35);
  --radius-lg: 22px;
  --radius-md: 14px;
  --radius-sm: 10px;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: "Inter", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  color: var(--text);
  background:
    radial-gradient(circle at 8% -10%, #2f4e9f 0%, transparent 35%),
    radial-gradient(circle at 90% 0%, #5f2e8f 0%, transparent 32%),
    linear-gradient(145deg, #080d1d 20%, #111b38 100%);
  min-height: 100vh;
}

.container {
  width: min(1100px, 92vw);
  margin: 0 auto;
  padding: 28px 0 44px;
}

.nav {
  display: flex;
  justify-content: space-between;
  gap: 14px;
  align-items: center;
  padding: 10px 0 24px;
  flex-wrap: wrap;
}

.brand {
  display: inline-flex;
  gap: 12px;
  align-items: center;
  color: var(--text);
  text-decoration: none;
  font-weight: 700;
  letter-spacing: 0.01em;
}

.logo {
  width: 34px;
  height: 34px;
  border-radius: 10px;
  background: linear-gradient(135deg, var(--primary) 0%, #8f67ff 100%);
  box-shadow: 0 10px 24px rgba(95, 124, 255, 0.45);
  position: relative;
}

.logo::after {
  content: "";
  position: absolute;
  inset: 8px;
  border-radius: 5px;
  border: 2px solid rgba(255, 255, 255, 0.75);
}

.menu {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.menu a {
  text-decoration: none;
  color: var(--text-muted);
  font-size: 0.95rem;
  font-weight: 500;
  padding: 8px 12px;
  border-radius: 999px;
  transition: all 0.2s ease;
}

.menu a:hover,
.menu a[aria-current="page"] {
  color: var(--text);
  background: rgba(130, 155, 255, 0.2);
}

.hero,
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
}

.hero {
  padding: 34px;
  margin-bottom: 22px;
}

.h1 {
  font-size: clamp(1.5rem, 1.2rem + 1.35vw, 2.4rem);
  line-height: 1.15;
  margin: 0;
  letter-spacing: -0.02em;
}

.p {
  margin: 16px 0 0;
  color: var(--text-muted);
  line-height: 1.6;
  max-width: 78ch;
}

/* NOVA ESTRUTURA: coluna única, com a calculadora em evidência */
.stack {
  display: grid;
  gap: 18px;
}

/* Área central para dar destaque (igual ao mock) */
.center {
  width: min(980px, 100%);
  margin: 0 auto;
}

.card {
  padding: 28px;
}

.card h2 {
  margin: 0 0 16px;
  font-size: 1.25rem;
}

.form {
  display: grid;
  gap: 16px;
}

.row {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 14px;
}

label {
  display: block;
  margin-bottom: 8px;
  color: var(--text-muted);
  font-size: 0.92rem;
}

input {
  width: 100%;
  border: 1px solid transparent;
  background: rgba(16, 25, 50, 0.95);
  color: var(--text);
  border-radius: var(--radius-sm);
  padding: 12px 13px;
  outline: none;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

input::placeholder { color: #8f9ac0; }

input:focus {
  border-color: rgba(120, 146, 255, 0.9);
  box-shadow: 0 0 0 3px rgba(113, 137, 255, 0.2);
}

.button-wrap {
  display: flex;
  align-items: end;
}

.btn {
  width: 100%;
  border: 0;
  background: linear-gradient(120deg, var(--primary) 0%, #7a77ff 100%);
  color: #fff;
  padding: 12px 18px;
  border-radius: var(--radius-sm);
  font-weight: 700;
  cursor: pointer;
  transition: transform 0.12s ease, box-shadow 0.2s ease;
  box-shadow: 0 14px 30px rgba(79, 125, 255, 0.34);
}

.btn:hover { transform: translateY(-1px); }

.result {
  margin-top: 20px;
  padding: 16px;
  border-radius: var(--radius-md);
  line-height: 1.5;
  border: 1px solid rgba(138, 159, 236, 0.3);
  background: rgba(14, 22, 46, 0.72);
}

.result.success {
  border-color: rgba(61, 213, 152, 0.44);
  box-shadow: inset 0 0 0 1px rgba(61, 213, 152, 0.16);
}

.result.error {
  border-color: rgba(255, 107, 138, 0.45);
  box-shadow: inset 0 0 0 1px rgba(255, 107, 138, 0.15);
}

.result strong { color: #fff; }
.muted { color: var(--text-muted); }

ul {
  padding-left: 1.2rem;
  margin: 0;
  display: grid;
  gap: 8px;
  color: var(--text-muted);
}

p {
  color: var(--text-muted);
  line-height: 1.6;
}

.footer {
  margin-top: 26px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 14px;
  flex-wrap: wrap;
  color: #a6b0cf;
  font-size: 0.92rem;
}

.small-links {
  display: flex;
  gap: 12px;
}

.small-links a {
  color: #c0cae8;
  text-decoration: none;
}

.small-links a:hover { text-decoration: underline; }

@media (max-width: 680px) {
  .container {
    width: min(1100px, 94vw);
    padding-top: 18px;
  }

  .hero,
  .card {
    padding: 20px;
  }

  .row {
    grid-template-columns: 1fr;
    gap: 12px;
  }

  .nav { align-items: flex-start; }
}
  </style>
</head>
<body>
  <div class="container">
    <header class="nav">
      <a class="brand" href="index.html" aria-label="Ir para a página inicial">
        <span class="logo" aria-hidden="true"></span>
        <span>Tabela Raoni</span>
      </a>
      <nav class="menu" aria-label="Menu principal">
        <a href="index.html" aria-current="page">Ferramenta</a>
        <a href="sobre.html">Sobre</a>
        <a href="contato.html">Contato</a>
        <a href="termos.html">Termos</a>
        <a href="privacidade.html">Privacidade</a>
      </nav>
    </header>

    <section class="hero">
      <h1 class="h1">Projeção de posição provável em concursos</h1>
      <p class="p">
        Descubra uma estimativa rápida da sua posição com base no ranking, no número oficial de inscritos e no percentual de faltosos.
        A simulação inclui uma margem de erro para refletir diferentes cenários.
      </p>
    </section>

    <!-- Estrutura conforme a imagem: calculadora central e "Como usar" abaixo -->
    <main class="stack center" aria-label="Ferramenta de projeção">
      <section class="card" aria-label="Calculadora">
        <h2>Calculadora</h2>

        <form id="calcForm" class="form">
          <div class="row">
            <div>
              <label for="inscritosTotal">Inscritos totais (oficial)</label>
              <input id="inscritosTotal" inputmode="numeric" placeholder="Ex.: 12.000" required />
            </div>
            <div>
              <label for="inscritosRanking">Inscritos no ranking / lista</label>
              <input id="inscritosRanking" inputmode="numeric" placeholder="Ex.: 1.000" required />
            </div>
          </div>

          <div class="row">
            <div>
              <label for="suaPosicao">Sua posição no ranking</label>
              <input id="suaPosicao" inputmode="numeric" placeholder="Ex.: 5" required />
            </div>
            <div>
              <label for="faltososPct">% de faltosos</label>
              <input id="faltososPct" inputmode="decimal" placeholder="Ex.: 40" required />
            </div>
          </div>

          <div class="row">
            <div>
              <label for="margemErroPct">Margem de erro (%)</label>
              <input id="margemErroPct" inputmode="decimal" placeholder="Ex.: 5" value="5" />
            </div>
            <div class="button-wrap">
              <button class="btn" type="submit">Calcular projeção</button>
            </div>
          </div>
        </form>

        <div id="resultado" class="result">
          Preencha os dados e clique em <strong>Calcular projeção</strong>.
        </div>
      </section>

      <section class="card" aria-label="Como usar">
        <h2>Como usar</h2>
        <ul>
          <li>Informe o número <strong>oficial</strong> de inscritos no concurso.</li>
          <li>Informe quantos aparecem no <strong>ranking/lista</strong> que você está usando.</li>
          <li>Digite sua <strong>posição</strong> atual na lista.</li>
          <li>Informe o <strong>% de faltosos</strong> (estimado ou divulgado).</li>
          <li>Ajuste a <strong>margem de erro</strong> para ter um intervalo mais conservador.</li>
        </ul>
        <p>
          <strong>Observação:</strong> o resultado é uma estimativa. A posição final pode variar por critérios do edital,
          empates, recursos, convocações, desistências e particularidades do concurso.
        </p>
      </section>
    </main>

    <footer class="footer">
      <div>© <span id="year"></span> Tabela Raoni</div>
      <div class="small-links">
        <a href="termos.html">Termos</a>
        <a href="privacidade.html">Privacidade</a>
        <a href="contato.html">Contato</a>
      </div>
    </footer>
  </div>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
  <script src="assets/app.js?v=20260218"></script>

  <script>
const tabelaRaoni = [
  [0, 3, 1.0], [3, 5, 1.125], [5, 10, 1.177],
  [10, 15, 1.202], [15, 20, 1.367], [20, 25, 1.456],
  [25, 30, 1.5642], [30, 35, 1.786], [35, 40, 1.924],
  [40, 45, 2.2121], [45, 50, 2.352], [50, 55, 2.564],
  [55, 60, 2.876], [60, 65, 3.08765], [65, 70, 3.222],
  [70, 75, 3.421], [75, 80, 3.656], [80, 85, 3.945],
  [85, 90, 4.331], [90, 95, 4.567], [95, 100, 4.7125]
];

function calcularProjecao(inscritosOficial, inscritosRanking, minhaPosicao, percentualFaltosos) {
  if (inscritosOficial <= 0) throw new Error("Inscritos no concurso deve ser maior que zero.");
  if (inscritosRanking <= 0) throw new Error("Inscritos no ranking deve ser maior que zero.");
  if (minhaPosicao <= 0) throw new Error("Sua posição deve ser maior que zero.");
  if (minhaPosicao > inscritosRanking) throw new Error("Sua posição não pode ser maior que os inscritos no ranking.");
  if (percentualFaltosos < 0 || percentualFaltosos > 100) throw new Error("Percentual de faltosos deve estar entre 0 e 100.");

  const faltosos = inscritosOficial * (percentualFaltosos / 100);
  const presentes = inscritosOficial - faltosos;

  const posicaoPercentual = minhaPosicao / inscritosRanking;
  const chanceColocacao = posicaoPercentual * presentes;

  const match = tabelaRaoni.find(([inicio, fim]) => chanceColocacao >= inicio && chanceColocacao < fim);
  const constante = match ? match[2] : 5.0025;

  const classificacao = Math.ceil(minhaPosicao * constante);
  const margemMin = Math.max(1, classificacao - 5);
  const margemMax = classificacao + 2;

  return { classificacao, margemMin, margemMax, presentes, constante };
}

(() => {
  if (window.__raoniCalcInitialized) return;
  window.__raoniCalcInitialized = true;

  const form = document.getElementById("calcForm");
  const resultado = document.getElementById("resultado");

  if (!form || !resultado) return;

  const parseNumber = (value) => Number(String(value).replace(",", ".").trim());
  const toBR = (value) => new Intl.NumberFormat("pt-BR").format(Math.round(value));

  const setResult = (message, type = "success") => {
    resultado.className = `result ${type}`;
    resultado.innerHTML = message;
  };

  form.addEventListener("submit", (event) => {
    event.preventDefault();

    const inscritosTotal = parseNumber(document.getElementById("inscritosTotal")?.value);
    const inscritosRanking = parseNumber(document.getElementById("inscritosRanking")?.value);
    const suaPosicao = parseNumber(document.getElementById("suaPosicao")?.value);
    const faltososPct = parseNumber(document.getElementById("faltososPct")?.value);
    const margemErroPct = parseNumber(document.getElementById("margemErroPct")?.value || "0");

    if ([inscritosTotal, inscritosRanking, suaPosicao, faltososPct, margemErroPct].some(Number.isNaN)) {
      setResult("Verifique os campos. Use apenas números válidos.", "error");
      return;
    }

    try {
      const { classificacao, margemMin, margemMax, presentes } = calcularProjecao(
        inscritosTotal,
        inscritosRanking,
        suaPosicao,
        faltososPct
      );

      const ajusteMargem = Math.max(0, margemErroPct) / 100;
      const larguraBase = Math.max(1, margemMax - margemMin);
      const extra = Math.ceil(larguraBase * ajusteMargem);
      const faixaMin = Math.max(1, margemMin - extra);
      const faixaMax = margemMax + extra;

      setResult(
        `
        <strong>Classificação projetada:</strong> ${toBR(classificacao)}<br />
        <span class="muted"><strong>Faixa estimada de posição:</strong> ${toBR(faixaMin)} a ${toBR(faixaMax)}</span><br />
        <span class="muted"><strong>Presentes estimados:</strong> ${toBR(presentes)} candidatos</span><br />
        `,
        "success"
      );
    } catch (error) {
      setResult(error.message || "Não foi possível calcular a projeção.", "error");
    }
  });
})();
  </script>
</body>
</html>
