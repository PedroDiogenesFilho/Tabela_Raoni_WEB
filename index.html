<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tabela Raoni — Projeção de Posição</title>
  <meta name="description" content="Ferramenta simples para projetar posição provável em concursos a partir de dados do ranking de concursos e percentual de faltosos." />

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5754272579077136" crossorigin="anonymous"></script>
  <meta name="google-adsense-account" content="ca-pub-5754272579077136" />

  <link rel="stylesheet" href="assets/style.css?v=20260218" />

  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QLZDGBFWT3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QLZDGBFWT3');
</script>


  <style>
    :root{
      --bg0:#070b18;
      --bg1:#0c1330;
      --surface: rgba(16, 22, 46, .70);
      --text:#eef2ff;
      --muted:#b8c3e6;
      --line: rgba(164,180,230,.26);
      --shadow: 0 26px 80px rgba(3, 7, 20, .55);
      --shadow2: 0 12px 34px rgba(3, 7, 20, .38);
      --r-lg: 26px;
      --r-md: 18px;
      --r-sm: 12px;

      --a0:#4f7dff;
      --a1:#7b6cff;
      --a2:#b44cff;
      --ok:#3dd598;
      --bad:#ff6b8a;

      --grad: linear-gradient(120deg, rgba(79,125,255,1) 0%, rgba(123,108,255,1) 45%, rgba(180,76,255,1) 100%);
      --grad-shadow: 0 16px 40px rgba(79,125,255,.28);
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color:var(--text);
      min-height:100vh;
      background:
        radial-gradient(900px 520px at 12% -10%, rgba(79,125,255,.55), transparent 55%),
        radial-gradient(900px 520px at 92% -8%, rgba(180,76,255,.55), transparent 55%),
        linear-gradient(145deg, var(--bg0) 20%, var(--bg1) 100%);
    }

    a{ color:inherit; }

    .container{ width:min(1120px, 92vw); margin:0 auto; padding: 26px 0 46px; }

    .nav{
      display:flex; align-items:center; justify-content:space-between;
      gap:14px; flex-wrap:wrap;
      padding: 10px 0 22px;
    }

    .brand{ display:inline-flex; align-items:center; gap:12px; text-decoration:none; font-weight:800; letter-spacing:.01em; }

    .logo{
      width:36px; height:36px; border-radius:12px;
      background: var(--grad);
      box-shadow: 0 12px 30px rgba(79,125,255,.28);
      position:relative;
    }

    .logo::after{
      content:"";
      position:absolute; inset:9px;
      border-radius:7px;
      border:2px solid rgba(255,255,255,.78);
    }

    .menu{ display:flex; flex-wrap:wrap; gap:10px; }

    .menu a{
      text-decoration:none;
      color: rgba(230,236,255,.78);
      font-size:.95rem;
      padding: 8px 12px;
      border-radius: 999px;
      transition: background .18s ease, color .18s ease;
      opacity:.92;
    }

    .menu a:hover{ background: rgba(130,155,255,.18); color: var(--text); }

    .menu a[aria-current="page"]{
      background: rgba(130,155,255,.22);
      color: var(--text);
      border: 1px solid rgba(160,176,230,.18);
    }

    .hero{
      border-radius: var(--r-lg);
      background: linear-gradient(135deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border: 1px solid rgba(164,180,230,.22);
      box-shadow: var(--shadow2);
      padding: 30px;
      overflow:hidden;
      position:relative;
      margin-bottom: 18px;
    }

    .hero::before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(700px 260px at 18% 0%, rgba(79,125,255,.28), transparent 60%),
        radial-gradient(700px 260px at 88% 8%, rgba(180,76,255,.24), transparent 60%);
      pointer-events:none;
    }

    .hero h1{ margin:0; font-size: clamp(1.55rem, 1.15rem + 1.55vw, 2.55rem); letter-spacing:-.02em; position:relative; }

    .hero p{ margin: 14px 0 0; max-width: 82ch; color: var(--muted); line-height:1.65; position:relative; }

    .stack{ display:grid; gap:18px; }

    .tool-spotlight{
      border-radius: var(--r-lg);
      padding: 18px;
      background:
        radial-gradient(1200px 420px at 50% 0%, rgba(79,125,255,.22), transparent 60%),
        radial-gradient(900px 340px at 85% 18%, rgba(180,76,255,.20), transparent 60%),
        rgba(12, 18, 40, .55);
      border: 1px solid rgba(164,180,230,.22);
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }

    .tool-spotlight::after{
      content:"";
      position:absolute;
      inset:-2px;
      border-radius: inherit;
      background: var(--grad);
      opacity:.22;
      filter: blur(18px);
      pointer-events:none;
    }

    .tool-card{
      position:relative;
      border-radius: calc(var(--r-lg) - 6px);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border: 1px solid rgba(160,176,230,.22);
      box-shadow: 0 22px 70px rgba(6, 10, 26, .55);
      overflow:hidden;
    }

    .tool-head{
      padding: 22px 22px 12px;
      display:flex;
      align-items:flex-end;
      justify-content: space-between;
      gap: 16px;
      flex-wrap: wrap;
    }

    .tool-title{ display:flex; flex-direction:column; gap:6px; }
    .tool-title h2{ margin:0; font-size:1.32rem; letter-spacing:-.01em; }
    .tool-title span{ color: var(--muted); font-size:.95rem; }

    .tool-body{ padding: 0 22px 22px; }

    .grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 14px;
    }

    .field{
      background: rgba(10, 14, 32, .35);
      border: 1px solid rgba(164,180,230,.18);
      border-radius: var(--r-md);
      padding: 12px 12px;
      position:relative;
    }

    .field .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      margin-bottom: 10px;
    }

    .label{
      display:flex;
      align-items:center;
      gap:10px;
      color: rgba(230,236,255,.86);
      font-size: .95rem;
      font-weight: 600;
    }

    .hint{
      color: rgba(230,236,255,.66);
      font-size: .9rem;
      font-weight: 600;
    }

    .icon{
      width: 26px;
      height: 26px;
      border-radius: 10px;
      display:grid;
      place-items:center;
      background: rgba(79,125,255,.14);
      border: 1px solid rgba(79,125,255,.25);
    }

    .icon svg{ width: 15px; height: 15px; fill: rgba(230,236,255,.95); }

    input[type="text"], input[type="number"]{
      width:100%;
      border: 1px solid transparent;
      background: rgba(10, 14, 32, .55);
      color: var(--text);
      padding: 12px 12px;
      border-radius: var(--r-sm);
      outline:none;
      font-size: 1rem;
      transition: box-shadow .16s ease, border-color .16s ease;
    }

    input::placeholder{ color: rgba(184,195,230,.65); }

    input:focus{
      border-color: rgba(120,146,255,.85);
      box-shadow: 0 0 0 3px rgba(113,137,255,.20);
    }

    .rowwide{
      display:grid;
      grid-template-columns: 1fr 320px;
      gap: 14px;
      margin-top: 14px;
      align-items:end;
    }

    .cta{
      height: 48px;
      border: 0;
      width: 100%;
      border-radius: var(--r-md);
      cursor: pointer;
      font-weight: 800;
      letter-spacing: .01em;
      color: #ffffff;
      background: var(--grad);
      box-shadow: var(--grad-shadow);
      transition: transform .12s ease, filter .12s ease;
    }

    .cta:hover{ transform: translateY(-1px); filter: brightness(1.03); }

    .note{
      margin-top: 14px;
      padding: 14px 14px;
      border-radius: var(--r-md);
      background: rgba(7, 10, 24, .40);
      border: 1px solid rgba(164,180,230,.20);
      color: rgba(230,236,255,.86);
      line-height: 1.55;
    }

    .note strong{ color: #fff; }

    .result{
      display:none;
      margin-top: 14px;
      padding: 16px;
      border-radius: var(--r-md);
      background: var(--grad);
      color: rgba(255,255,255,.96);
      box-shadow: var(--grad-shadow);
      border: 1px solid rgba(255,255,255,.18);
      line-height: 1.6;
      position:relative;
      overflow:hidden;
      transform: translateY(6px);
      opacity: 0;
      transition: transform .18s ease, opacity .18s ease;
    }

    .result.is-visible{ display:block; transform: translateY(0); opacity: 1; }

    .result::before{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(180deg, rgba(255,255,255,.16), rgba(255,255,255,0));
      opacity:.35;
      pointer-events:none;
    }

    .result > *{ position:relative; }

    .result .muted{ color: rgba(255,255,255,.88); }

    .result.success::after,
    .result.error::after{
      content:"";
      position:absolute;
      left: 10px;
      top: 10px;
      bottom: 10px;
      width: 4px;
      border-radius: 999px;
      opacity:.9;
    }

    .result.success::after{ background: rgba(61,213,152,.95); box-shadow: 0 0 0 3px rgba(61,213,152,.18); }
    .result.error::after{ background: rgba(255,107,138,.95); box-shadow: 0 0 0 3px rgba(255,107,138,.16); }

    .result.error{ filter: saturate(1.02); }

    .muted{ color: var(--muted); }

    .below{
      border-radius: var(--r-lg);
      background: var(--surface);
      border: 1px solid rgba(164,180,230,.22);
      box-shadow: var(--shadow2);
      padding: 24px;
    }

    .below h3{ margin: 0 0 12px; font-size:1.15rem; }

    ul{ margin:0; padding-left: 1.15rem; display:grid; gap:8px; color: var(--muted); }

    .below p{ margin: 12px 0 0; color: var(--muted); line-height:1.6; }

    .footer{
      margin-top: 26px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
      flex-wrap:wrap;
      color: rgba(184,195,230,.86);
      font-size: .92rem;
    }

    .small-links{ display:flex; gap: 12px; }
    .small-links a{ text-decoration:none; color: rgba(230,236,255,.86); opacity:.9; }
    .small-links a:hover{ text-decoration: underline; }

    @media (max-width: 820px){
      .grid{ grid-template-columns: 1fr; }
      .rowwide{ grid-template-columns: 1fr; }
      .tool-head{ align-items:flex-start; }
    }

    @media (max-width: 520px){
      .container{ width: min(1120px, 94vw); padding-top: 18px; }
      .hero{ padding: 22px; }
      .tool-spotlight{ padding: 14px; }
      .tool-head{ padding: 18px 18px 10px; }
      .tool-body{ padding: 0 18px 18px; }
      .below{ padding: 20px; }
    }

    /* Resultado em cards + abas (Compartilhar / PDF) */
    .result-cards{
      margin-top: 16px;
      border-radius: var(--r-lg);
      background: rgba(12, 18, 40, .55);
      border: 1px solid rgba(164,180,230,.22);
      box-shadow: var(--shadow2);
      padding: 18px;
    }

    .result-head{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap: 12px;
      flex-wrap:wrap;
      margin-bottom: 14px;
    }

    .result-head h3{ margin:0; font-size:1.12rem; letter-spacing:-.01em; }
    .result-meta{ color: rgba(230,236,255,.78); font-size: .9rem; font-weight: 700; }
    .result-subline{ margin-top: 6px; color: rgba(184,195,230,.92); font-size: .92rem; }

    .result-grid{
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
    }

    .r-card{
      border-radius: var(--r-md);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border: 1px solid rgba(160,176,230,.20);
      padding: 14px;
      box-shadow: 0 18px 50px rgba(6, 10, 26, .35);
      overflow:hidden;
    }

    .r-label{ color: rgba(230,236,255,.86); font-weight: 800; font-size: .95rem; }
    .r-value{ margin-top: 8px; font-size: 1.55rem; font-weight: 900; letter-spacing:-.02em; }
    .r-sub{ margin-top: 8px; color: rgba(184,195,230,.92); font-size: .9rem; line-height: 1.45; }

    .conf-pill{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(164,180,230,.26);
      background: rgba(10, 14, 32, .45);
      font-size: .95rem;
      font-weight: 900;
      width: fit-content;
    }

    .conf-dot{
      width: 9px;
      height: 9px;
      border-radius: 999px;
      background: rgba(184,195,230,.92);
      box-shadow: 0 0 0 4px rgba(184,195,230,.14);
      flex: 0 0 auto;
    }

    .conf-low .conf-dot{ background: rgba(255,107,138,.95); box-shadow: 0 0 0 4px rgba(255,107,138,.16); }
    .conf-med .conf-dot{ background: rgba(255,214,102,.95); box-shadow: 0 0 0 4px rgba(255,214,102,.16); }
    .conf-high .conf-dot{ background: rgba(61,213,152,.95); box-shadow: 0 0 0 4px rgba(61,213,152,.18); }

    .result-extra{
      margin-top: 12px;
      padding: 12px 14px;
      border-radius: var(--r-md);
      border: 1px solid rgba(164,180,230,.18);
      background: rgba(7, 10, 24, .30);
      color: rgba(230,236,255,.86);
      line-height: 1.55;
    }

    .tabs{ margin-top: 14px; }

    .tablist{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      margin-bottom: 12px;
    }

    .tab-btn{
      border: 1px solid rgba(164,180,230,.18);
      background: rgba(10, 14, 32, .35);
      color: rgba(230,236,255,.88);
      padding: 10px 14px;
      border-radius: 999px;
      font-weight: 900;
      cursor:pointer;
      transition: transform .12s ease, background .16s ease, border-color .16s ease;
    }

    .tab-btn:hover{ transform: translateY(-1px); background: rgba(130,155,255,.14); }
    .tab-btn.is-active{ background: rgba(130,155,255,.20); border-color: rgba(160,176,230,.28); color: var(--text); }

    .tab-panel{ display:grid; gap: 12px; }

    .panel-card{
      border-radius: var(--r-md);
      background: rgba(10, 14, 32, .35);
      border: 1px solid rgba(164,180,230,.18);
      padding: 14px;
    }

    .panel-title{ font-weight: 900; margin-bottom: 10px; color: rgba(230,236,255,.92); }

    .panel-row{
      display:grid;
      grid-template-columns: 1fr 140px;
      gap: 10px;
      align-items:center;
    }

    .panel-card input[type="text"],
    .panel-card textarea{
      width:100%;
      border: 1px solid rgba(164,180,230,.18);
      background: rgba(10, 14, 32, .55);
      color: var(--text);
      padding: 12px 12px;
      border-radius: var(--r-sm);
      outline:none;
      font-size: .98rem;
    }

    .panel-card textarea{ resize: vertical; min-height: 110px; }

    .panel-options{
      display:flex;
      flex-wrap:wrap;
      gap: 10px 14px;
      margin-top: 12px;
      color: rgba(230,236,255,.86);
      font-weight: 700;
      font-size: .92rem;
    }

    .chk{ display:flex; align-items:center; gap: 10px; }
    .chk input{ accent-color: var(--a1); }

    .panel-actions{
      margin-top: 12px;
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      gap: 10px;
    }

    .panel-hint{
      color: rgba(184,195,230,.92);
      font-size: .9rem;
      line-height: 1.45;
      max-width: 72ch;
    }

    .btn{
      height: 44px;
      padding: 0 14px;
      border-radius: var(--r-md);
      border: 1px solid rgba(164,180,230,.22);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.95);
      cursor:pointer;
      font-weight: 900;
      letter-spacing:.01em;
      transition: transform .12s ease, filter .12s ease, background .16s ease;
      width:100%;
    }

    .btn:hover{ transform: translateY(-1px); background: rgba(130,155,255,.14); }
    .btn.primary{ border:0; background: var(--grad); box-shadow: var(--grad-shadow); }
    .btn.primary:hover{ filter: brightness(1.03); }

    .toast{
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      background: rgba(10, 14, 32, .86);
      border: 1px solid rgba(164,180,230,.22);
      color: rgba(255,255,255,.95);
      padding: 10px 14px;
      border-radius: 999px;
      box-shadow: var(--shadow2);
      z-index: 50;
      opacity: 0;
      pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
    }

    .toast.is-visible{ opacity: 1; transform: translateX(-50%) translateY(-2px); }

    @media (max-width: 920px){
      .result-grid{ grid-template-columns: 1fr; }
      .panel-row{ grid-template-columns: 1fr; }
      .btn{ width: 100%; }
    }

    /* Impressão / PDF */
    #printArea{ display:none; }
    @media print{
      @page { margin: 12mm; }
      body{
        background: #0c1330 !important;
        color: var(--text) !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
      .nav, .hero, .below, .footer{ display:none !important; }
      .container{ width:auto !important; margin:0 !important; padding:0 !important; }
      .tool-spotlight{ padding:0 !important; border:none !important; box-shadow:none !important; background: transparent !important; }
      .tool-card{ box-shadow:none !important; }
      #resultadoMsg{ display:none !important; }
      #resultadoCards{ display:block !important; }

      body.print-hide-inputs .grid,
      body.print-hide-inputs .rowwide{ display:none !important; }

      body.print-hide-time #resultadoMeta{ display:none !important; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="nav">
      <a class="brand" href="index.html" aria-label="Ir para a página inicial">
        <span class="logo" aria-hidden="true"></span>
        <span>Tabela Raoni</span>
      </a>
      <nav class="menu" aria-label="Menu principal">
        <a href="index.html" aria-current="page">Ferramenta</a>
        <a href="sobre.html">Sobre</a>
        <a href="contato.html">Contato</a>
        <a href="termos.html">Termos</a>
        <a href="privacidade.html">Privacidade</a>
      </nav>
    </header>

    <section class="hero">
      <h1>Projeção de posição provável em concursos</h1>
      <p>
        Estime sua posição a partir do ranking de concursos (lista de inscritos), do número oficial de inscritos do concurso e do percentual de faltosos.
        O cálculo segue as constantes e a faixa estimada da <strong>Tabela Raoni 3.0</strong>.
      </p>
    </section>

    <main class="stack" aria-label="Ferramenta de projeção">
      <section class="tool-spotlight" aria-label="Calculadora em destaque">
        <div class="tool-card">
          <div class="tool-head">
            <div class="tool-title">
              <h2>Calculadora de Posição</h2>
              <span>Preencha os campos e calcule sua projeção em segundos.</span>
            </div>
          </div>

          <div class="tool-body">
            <form id="calcForm" novalidate>
              <div class="grid">
                <div class="field">
                  <div class="top">
                    <div class="label">
                      <span class="icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24"><path d="M4 4h16v4H4V4zm0 6h10v10H4V10zm12 0h4v10h-4V10z"/></svg>
                      </span>
                      <span>Inscritos totais do concurso (oficial divulgado pela banca)</span>
                    </div>
                    <div class="hint" id="hintInscritosTotal">&nbsp;</div>
                  </div>
                  <input id="inscritosTotal" type="text" inputmode="numeric" autocomplete="off" placeholder="Ex.: 12.000" required />
                </div>

                <div class="field">
                  <div class="top">
                    <div class="label">
                      <span class="icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24"><path d="M3 7h18v2H3V7zm0 4h18v2H3v-2zm0 4h18v2H3v-2z"/></svg>
                      </span>
                      <span>Inscritos no ranking do concurso / lista</span>
                    </div>
                    <div class="hint" id="hintInscritosRanking">&nbsp;</div>
                  </div>
                  <input id="inscritosRanking" type="text" inputmode="numeric" autocomplete="off" placeholder="Ex.: 1.000" required />
                </div>

                <div class="field">
                  <div class="top">
                    <div class="label">
                      <span class="icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24"><path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm0 2c-4.4 0-8 2.2-8 5v1h16v-1c0-2.8-3.6-5-8-5z"/></svg>
                      </span>
                      <span>Sua posição no ranking</span>
                    </div>
                    <div class="hint" id="hintSuaPosicao">&nbsp;</div>
                  </div>
                  <input id="suaPosicao" type="text" inputmode="numeric" autocomplete="off" placeholder="Ex.: 5" required />
                </div>

                <div class="field">
                  <div class="top">
                    <div class="label">
                      <span class="icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm1 17.93V20h-2v-.07A8 8 0 0 1 4.07 13H4v-2h.07A8 8 0 0 1 11 4.07V4h2v.07A8 8 0 0 1 19.93 11H20v2h-.07A8 8 0 0 1 13 19.93z"/></svg>
                      </span>
                      <span>% de faltosos</span>
                    </div>
                    <div class="hint" id="hintFaltosos">&nbsp;</div>
                  </div>
                  <input id="faltososPct" type="text" inputmode="decimal" autocomplete="off" placeholder="Ex.: 40" required />
                </div>
              </div>

              <div class="rowwide">
                <div class="note">
                  <strong>Dica:</strong> se o % de faltosos não for divulgado pela banca examinadora, use um valor padrão entre 35 a 50 %.
                </div>
                <button class="cta" type="submit">Calcular Posição</button>
              </div>
            </form>

            <div id="resultadoMsg" class="result" aria-live="polite"></div>

            <section id="resultadoCards" class="result-cards" aria-label="Resultado" hidden>
              <div class="result-head">
                <div>
                  <h3>Resultado</h3>
                  <div class="result-subline" id="resultadoSubline">—</div>
                </div>
                <div class="result-meta" id="resultadoMeta">Atualizado em —</div>
              </div>

              <div class="result-grid" role="group" aria-label="Resumo do resultado">
                <div class="r-card">
                  <div class="r-label">Posição projetada</div>
                  <div class="r-value" id="cardPosicao">—</div>
                  <div class="r-sub">Estimativa central</div>
                </div>

                <div class="r-card">
                  <div class="r-label">Faixa estimada de posição</div>
                  <div class="r-value" id="cardFaixa">—</div>
                  <div class="r-sub">Mín — Máx</div>
                </div>

                <div class="r-card">
                  <div class="r-label">Grau de confiança</div>
                  <div class="r-value">
                    <span class="conf-pill conf-med" id="cardConfianca">
                      <span class="conf-dot" aria-hidden="true"></span>
                      <span id="cardConfiancaText">—</span>
                    </span>
                  </div>
                  <div class="r-sub" id="cardConfiancaDesc">—</div>
                </div>
              </div>

              <div class="result-extra" id="resultadoExtra">—</div>

              <div class="tabs" aria-label="Ações do resultado">
                <div class="tablist" role="tablist" aria-label="Ações">
                  <button type="button" class="tab-btn is-active" role="tab" aria-selected="true" aria-controls="panelShare" id="tabShare">Compartilhar</button>
                  <button type="button" class="tab-btn" role="tab" aria-selected="false" aria-controls="panelPdf" id="tabPdf">Salvar em PDF</button>
                </div>

                <div class="tab-panels">
                  <div id="panelShare" class="tab-panel" role="tabpanel" aria-labelledby="tabShare">
                    <div class="panel-card">
                      <div class="panel-title">Link do resultado</div>
                      <div class="panel-row">
                        <input id="shareLink" type="text" readonly aria-label="Link do resultado" />
                        <button type="button" class="btn" id="btnCopyLink">Copiar</button>
                      </div>
                      <div class="panel-options">
                        <label class="chk"><input type="checkbox" id="optShareInputs" checked> Incluir dados de entrada no resumo</label>
                        <label class="chk"><input type="checkbox" id="optShareTime" checked> Incluir data/hora no resumo</label>
                      </div>
                    </div>

                    <div class="panel-card">
                      <div class="panel-title">Resumo para copiar</div>
                      <textarea id="shareSummary" rows="5" readonly aria-label="Resumo do resultado"></textarea>
                      <div class="panel-actions">
                        <button type="button" class="btn" id="btnCopySummary">Copiar resumo</button>
                      </div>
                    </div>
                  </div>

                  <div id="panelPdf" class="tab-panel" role="tabpanel" aria-labelledby="tabPdf" hidden>
                    <div class="panel-card">
                      <div class="panel-title">Salvar em PDF</div>
                      <div class="panel-options">
                        <label class="chk"><input type="checkbox" id="optPdfInputs" checked> Incluir dados de entrada</label>
                        <label class="chk"><input type="checkbox" id="optPdfTime" checked> Incluir data/hora</label>
                      </div>
                      <div class="panel-actions">
                        <button type="button" class="btn primary" id="btnPdf">Gerar PDF</button>
                        <div class="panel-hint">Abrirá o diálogo de impressão do navegador. Selecione “Salvar como PDF”.</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>
          </div>
        </div>
      </section>

      <section class="below" aria-label="Como usar">
        <h3>Como usar</h3>
        <ul>
          <li>Informe o número <strong>oficial</strong> de inscritos no concurso.</li>
          <li>Informe quantos aparecem no <strong>ranking/lista</strong> que você está usando.</li>
          <li>Digite sua <strong>posição</strong> atual na lista.</li>
          <li>Informe o <strong>% de faltosos</strong> (estimado ou divulgado).</li>
        </ul>
        <p>
          <strong>Observação:</strong> o resultado é uma estimativa. A posição final pode variar por critérios do edital, empates, recursos, convocações, anulações de questões, desistências e particularidades do concurso.
        </p>
      </section>
    </main>

    <footer class="footer">
      <div>© <span id="year"></span> Tabela Raoni</div>
      <div class="small-links">
        <a href="termos.html">Termos</a>
        <a href="privacidade.html">Privacidade</a>
        <a href="contato.html">Contato</a>
      </div>
    </footer>
  </div>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();

    const tabelaRaoni = [
      [0, 3, 1.0],
      [3, 5, 1.125],
      [5, 10, 1.177],
      [10, 15, 1.202],
      [15, 20, 1.367],
      [20, 25, 1.456],
      [25, 30, 1.5642],
      [30, 35, 1.786],
      [35, 40, 1.924],
      [40, 45, 2.2121],
      [45, 50, 2.352],
      [50, 55, 2.564],
      [55, 60, 2.876],
      [60, 65, 3.08765],
      [65, 70, 3.222],
      [70, 75, 3.421],
      [75, 80, 3.656],
      [80, 85, 3.945],
      [85, 90, 4.331],
      [90, 95, 4.567],
      [95, 100, 4.7125]
    ];

    const DEFAULT_CONSTANTE = 5.0025;

    const parseNumber = (value) => {
      const raw = String(value ?? "").trim();
      if (!raw) return NaN;
      return Number(raw.replace(/\./g, "").replace(",", "."));
    };

    const formatBR = (value) => new Intl.NumberFormat("pt-BR").format(Math.round(value));

    const pad2 = (n) => String(n).padStart(2, "0");

    const formatDateTimeBR = (d) => {
      const dt = d instanceof Date ? d : new Date(d);
      return `${pad2(dt.getDate())}/${pad2(dt.getMonth() + 1)}/${dt.getFullYear()} ${pad2(dt.getHours())}:${pad2(dt.getMinutes())}`;
    };

    function buscarConstante(chanceColocacao) {
      for (const [ini, fim, k] of tabelaRaoni) {
        if (chanceColocacao >= ini && chanceColocacao < fim) return k;
      }
      return DEFAULT_CONSTANTE;
    }

    function calcularProjecao(inscritosOficial, inscritosRanking, minhaPosicao, percentualFaltosos) {
      if (inscritosOficial <= 0) throw new Error("Inscritos no concurso deve ser maior que zero.");
      if (inscritosRanking <= 0) throw new Error("Inscritos no ranking deve ser maior que zero.");
      if (minhaPosicao <= 0) throw new Error("Sua posição deve ser maior que zero.");
      if (minhaPosicao > inscritosRanking) throw new Error("Sua posição não pode ser maior que os inscritos no ranking.");
      if (percentualFaltosos < 0 || percentualFaltosos > 100) throw new Error("Percentual de faltosos deve estar entre 0 e 100.");

      const faltosos = inscritosOficial * (percentualFaltosos / 100);
      const presentes = inscritosOficial - faltosos;

      const posicaoPercentual = minhaPosicao / inscritosRanking;
      const chanceColocacao = posicaoPercentual * presentes;

      const constante = buscarConstante(chanceColocacao);
      const classificacao = Math.ceil(minhaPosicao * constante);

      const faixaMin = Math.max(1, Math.floor(classificacao * 0.70));
      const faixaMax = Math.ceil(classificacao * 1.50);

      return { classificacao, faixaMin, faixaMax, presentes, chanceColocacao };
    }

    function calcularConfianca(chanceColocacao) {
      const v = Number(chanceColocacao);

      // Regra baseada na Tabela Raoni 3.0 (faixas de constantes):
      // Até 50 → cenário moderado a alto. Acima de 50 → cenário mais sensível (constantes mais altas).
      if (!Number.isFinite(v)) {
        return { nivel: "MÉDIA", classe: "conf-med", desc: "Cenário moderado (dados insuficientes para classificar com mais precisão)." };
      }

      if (v > 50) {
        return { nivel: "BAIXA", classe: "conf-low", desc: "Cenário mais sensível, quantidade de inscritos no ranking bem abaixo dos 10% em relação ao total oficial de inscritos no concurso ou posição do candidato em relação ao ranking muito baixa." };
      }

      if (v >= 20) {
        return { nivel: "MÉDIA", classe: "conf-med", desc: "Cenário moderado, dados como quantidade de inscritos ou posição no ranking afetam negativamente o calculo. Cenário ideal que o ranking possua pelo menos 10% de inscritos em relação a quantidade de inscritos oficial do concurso" };
      }

      return { nivel: "ALTA", classe: "conf-high", desc: "Cenário mais estável, ranking com mais que 10% de inscritos ou posição do candidato em relação ao número de inscritos no ranking favorável." };
    }

    function buildShareUrl({ inscritosTotal, inscritosRanking, suaPosicao, faltososPct }) {
      const base = location.href.split("?")[0];
      const qs = new URLSearchParams({
        it: String(Math.round(inscritosTotal)),
        ir: String(Math.round(inscritosRanking)),
        p: String(Math.round(suaPosicao)),
        f: String(faltososPct).replace(",", ".")
      });
      return `${base}?${qs.toString()}`;
    }

    function buildSummary({ classificacao, faixaMin, faixaMax, presentes, confianca, updatedAt, inputs }, includeInputs, includeTime) {
      const lines = [];
      lines.push("Tabela Raoni — Projeção de posição");
      lines.push(`Posição projetada: ${formatBR(classificacao)}`);
      lines.push(`Faixa estimada de posição: ${formatBR(faixaMin)} — ${formatBR(faixaMax)}`);
      lines.push(`Presentes estimados: ${formatBR(presentes)}`);
      lines.push(`Grau de confiança: ${confianca.nivel}`);

      if (includeInputs) {
        lines.push("");
        lines.push("Dados informados:");
        lines.push(`• Inscritos totais (oficial): ${formatBR(inputs.inscritosTotal)}`);
        lines.push(`• Inscritos no ranking/lista: ${formatBR(inputs.inscritosRanking)}`);
        lines.push(`• Sua posição no ranking: ${formatBR(inputs.suaPosicao)}`);
        lines.push(`• % de faltosos: ${String(inputs.faltososPct).replace(".", ",")}%`);
      }

      if (includeTime) {
        lines.push("");
        lines.push(`Atualizado em: ${formatDateTimeBR(updatedAt)}`);
      }

      return lines.join("\n");
    }

    async function copyToClipboard(text) {
      if (navigator.clipboard && window.isSecureContext) {
        await navigator.clipboard.writeText(text);
        return;
      }
      const ta = document.createElement("textarea");
      ta.value = text;
      ta.style.position = "fixed";
      ta.style.left = "-9999px";
      ta.style.top = "0";
      document.body.appendChild(ta);
      ta.focus();
      ta.select();
      document.execCommand("copy");
      ta.remove();
    }

    function showToast(message) {
      let toast = document.getElementById("toast");
      if (!toast) {
        toast = document.createElement("div");
        toast.id = "toast";
        toast.className = "toast";
        document.body.appendChild(toast);
      }
      toast.textContent = message;
      toast.classList.add("is-visible");
      window.clearTimeout(showToast._t);
      showToast._t = window.setTimeout(() => toast.classList.remove("is-visible"), 1600);
    }

    function setTab(activeId) {
      const tabShare = document.getElementById("tabShare");
      const tabPdf = document.getElementById("tabPdf");
      const panelShare = document.getElementById("panelShare");
      const panelPdf = document.getElementById("panelPdf");

      const isShare = activeId === "share";

      tabShare.classList.toggle("is-active", isShare);
      tabShare.setAttribute("aria-selected", isShare ? "true" : "false");
      tabPdf.classList.toggle("is-active", !isShare);
      tabPdf.setAttribute("aria-selected", !isShare ? "true" : "false");

      panelShare.hidden = !isShare;
      panelPdf.hidden = isShare;
    }

    (function init() {
      const form = document.getElementById("calcForm");

      const banner = document.getElementById("resultadoMsg");
      const cards = document.getElementById("resultadoCards");

      const elTotal = document.getElementById("inscritosTotal");
      const elRank = document.getElementById("inscritosRanking");
      const elPos = document.getElementById("suaPosicao");
      const elFalt = document.getElementById("faltososPct");

      const cardPos = document.getElementById("cardPosicao");
      const cardFaixa = document.getElementById("cardFaixa");
      const cardConf = document.getElementById("cardConfianca");
      const cardConfText = document.getElementById("cardConfiancaText");
      const cardConfDesc = document.getElementById("cardConfiancaDesc");
      const meta = document.getElementById("resultadoMeta");
      const subline = document.getElementById("resultadoSubline");
      const extra = document.getElementById("resultadoExtra");

      const shareLink = document.getElementById("shareLink");
      const shareSummary = document.getElementById("shareSummary");
      const optShareInputs = document.getElementById("optShareInputs");
      const optShareTime = document.getElementById("optShareTime");

      const optPdfInputs = document.getElementById("optPdfInputs");
      const optPdfTime = document.getElementById("optPdfTime");

      const btnCopyLink = document.getElementById("btnCopyLink");
      const btnCopySummary = document.getElementById("btnCopySummary");
      const btnPdf = document.getElementById("btnPdf");

      let last = null;

      const setBanner = (html, type) => {
        banner.className = `result is-visible ${type || ""}`.trim();
        banner.innerHTML = html;
      };

      const clearBanner = () => {
        banner.className = "result";
        banner.innerHTML = "";
      };

      const hideCards = () => {
        cards.hidden = true;
      };

      const setHint = (id, value) => {
        const node = document.getElementById(id);
        if (!node) return;
        node.textContent = Number.isFinite(value) ? formatBR(value) : "\u00A0";
      };

      const syncHints = () => {
        setHint("hintInscritosTotal", parseNumber(elTotal.value));
        setHint("hintInscritosRanking", parseNumber(elRank.value));
        setHint("hintSuaPosicao", parseNumber(elPos.value));
        const f = parseNumber(elFalt.value);
        const node = document.getElementById("hintFaltosos");
        if (node) node.textContent = Number.isFinite(f) ? `${String(f).replace(".", ",")}%` : "\u00A0";
      };

      const refreshSharePanels = () => {
        if (!last) return;
        shareLink.value = last.shareUrl;
        shareSummary.value = buildSummary(last.payload, optShareInputs.checked, optShareTime.checked);
      };

      const renderCards = (payload) => {
        cards.hidden = false;

        cardPos.textContent = formatBR(payload.classificacao);
        cardFaixa.textContent = `${formatBR(payload.faixaMin)} — ${formatBR(payload.faixaMax)}`;

        cardConf.classList.remove("conf-low", "conf-med", "conf-high");
        cardConf.classList.add(payload.confianca.classe);
        cardConfText.textContent = payload.confianca.nivel;
        cardConfDesc.textContent = payload.confianca.desc;

        meta.textContent = `Atualizado em ${formatDateTimeBR(payload.updatedAt)}`;
        subline.textContent = "Resultado baseado nos dados informados.";
        extra.innerHTML =
          `<strong>Presentes estimados:</strong> ${formatBR(payload.presentes)} candidatos <span class="muted">•</span> ` +
          `<span class="muted">Use a aba de compartilhamento para copiar o link ou o resumo.</span>`;
      };

      [elTotal, elRank, elPos, elFalt].forEach((el) => el.addEventListener("input", () => {
        syncHints();
        hideCards();
      }));
      syncHints();

      document.getElementById("tabShare").addEventListener("click", () => setTab("share"));
      document.getElementById("tabPdf").addEventListener("click", () => setTab("pdf"));
      setTab("share");

      optShareInputs.addEventListener("change", refreshSharePanels);
      optShareTime.addEventListener("change", refreshSharePanels);

      btnCopyLink.addEventListener("click", async () => {
        if (!last) return;
        try {
          await copyToClipboard(last.shareUrl);
          showToast("Link copiado.");
        } catch {
          showToast("Não foi possível copiar o link.");
        }
      });

      btnCopySummary.addEventListener("click", async () => {
        if (!last) return;
        try {
          await copyToClipboard(buildSummary(last.payload, optShareInputs.checked, optShareTime.checked));
          showToast("Resumo copiado.");
        } catch {
          showToast("Não foi possível copiar o resumo.");
        }
      });

      let printRestore = null;

      const preparePrint = () => {
        const panelShare = document.getElementById("panelShare");
        const panelPdf = document.getElementById("panelPdf");

        printRestore = {
          panelShareHidden: panelShare.hidden,
          panelPdfHidden: panelPdf.hidden,
          active: document.getElementById("tabPdf").classList.contains("is-active") ? "pdf" : "share"
        };

        panelShare.hidden = false;
        panelPdf.hidden = false;

        document.body.classList.toggle("print-hide-inputs", !optPdfInputs.checked);
        document.body.classList.toggle("print-hide-time", !optPdfTime.checked);
      };

      const restorePrint = () => {
        if (!printRestore) return;

        const panelShare = document.getElementById("panelShare");
        const panelPdf = document.getElementById("panelPdf");

        panelShare.hidden = printRestore.panelShareHidden;
        panelPdf.hidden = printRestore.panelPdfHidden;

        document.body.classList.remove("print-hide-inputs", "print-hide-time");

        setTab(printRestore.active);
        printRestore = null;
      };

      btnPdf.addEventListener("click", () => {
        if (!last) {
          setBanner("<strong>Calcule primeiro</strong> para gerar o PDF do resultado.", "error");
          return;
        }
        clearBanner();
        preparePrint();
        window.print();
      });

      window.addEventListener("afterprint", restorePrint);

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        const inscritosTotal = parseNumber(elTotal.value);
        const inscritosRanking = parseNumber(elRank.value);
        const suaPosicao = parseNumber(elPos.value);
        const faltososPct = parseNumber(elFalt.value);

        if ([inscritosTotal, inscritosRanking, suaPosicao, faltososPct].some(Number.isNaN)) {
          hideCards();
          setBanner("<strong>Verifique os campos.</strong> Use apenas números válidos.", "error");
          return;
        }

        try {
          const r = calcularProjecao(inscritosTotal, inscritosRanking, suaPosicao, faltososPct);
          const confianca = calcularConfianca(r.chanceColocacao);

          const updatedAt = new Date();

          const payload = {
            classificacao: r.classificacao,
            faixaMin: r.faixaMin,
            faixaMax: r.faixaMax,
            presentes: r.presentes,
            confianca,
            updatedAt,
            inputs: {
              inscritosTotal,
              inscritosRanking,
              suaPosicao,
              faltososPct
            }
          };

          last = {
            shareUrl: buildShareUrl(payload.inputs),
            payload
          };

          clearBanner();
          renderCards(payload);
          refreshSharePanels();
        } catch (err) {
          hideCards();
          setBanner(err?.message || "Não foi possível calcular a projeção.", "error");
        }
      });

      const qs = new URLSearchParams(location.search);
      const it = parseNumber(qs.get("it"));
      const ir = parseNumber(qs.get("ir"));
      const p = parseNumber(qs.get("p"));
      const f = parseNumber(qs.get("f"));

      const hasAll = [it, ir, p, f].every(Number.isFinite);
      if (hasAll) {
        elTotal.value = formatBR(it);
        elRank.value = formatBR(ir);
        elPos.value = formatBR(p);
        elFalt.value = String(f).replace(".", ",");
        syncHints();
        form.dispatchEvent(new Event("submit", { cancelable: true }));
      }
    })();
  </script>
</body>
</html>
